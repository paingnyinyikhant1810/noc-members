<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NOC Members</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Toast Container -->
    <div id="toastContainer" class="fixed top-4 right-4 z-[100]"></div>

    <!-- Context Menu -->
    <div id="contextMenu" class="hidden fixed bg-white rounded-xl shadow-xl border border-gray-200 py-2 z-[90] context-menu min-w-[160px]">
        <button onclick="renameItem()" class="w-full text-left px-4 py-2.5 hover:bg-gray-100 text-gray-700 flex items-center gap-3">
            <i class="fas fa-pen text-gray-400 w-4"></i> Rename
        </button>
        
        <hr class="my-2 border-gray-100">
        <button onclick="deleteItem()" class="w-full text-left px-4 py-2.5 hover:bg-red-50 text-red-600 flex items-center gap-3">
            <i class="fas fa-trash w-4"></i> Delete
        </button>
    </div>

    <!-- Info Card Context Menu -->
    <div id="infoCardContextMenu" class="hidden fixed bg-white rounded-xl shadow-xl border border-gray-200 py-2 z-[90] info-card-context-menu min-w-[160px]">
        <button onclick="editInfoCardFromContext()" class="w-full text-left px-4 py-2.5 hover:bg-gray-100 text-gray-700 flex items-center gap-3">
            <i class="fas fa-edit text-gray-400 w-4"></i> Edit
        </button>
        <hr class="my-2 border-gray-100">
        <button onclick="deleteInfoCardFromContext()" class="w-full text-left px-4 py-2.5 hover:bg-red-50 text-red-600 flex items-center gap-3">
            <i class="fas fa-trash w-4"></i> Delete
        </button>
    </div>

    <!-- Login Page -->
    <div id="loginPage" class="min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 to-slate-100 p-4">
        <div id="loginBox" class="bg-white p-8 rounded-3xl shadow-2xl shadow-gray-200/50 w-full max-w-md border border-gray-100">
            <div class="text-center mb-8">
                <div class="w-20 h-20 bg-gradient-to-br from-gray-800 to-gray-900 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg">
                    <i class="fas fa-users text-white text-3xl"></i>
                </div>
                <h1 class="text-3xl font-bold text-gray-800">NOC Members</h1>
                <p class="text-gray-400 mt-2">Sign in to continue</p>
            </div>
            <form id="loginForm" class="space-y-5">
                <div>
                    <label class="block text-sm font-medium text-gray-600 mb-2">Username</label>
                    <div class="relative">
                        <i class="fas fa-user absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"></i>
                        <input type="text" id="username" class="login-input w-full pl-11 pr-4 py-3.5 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-gray-800 focus:border-transparent focus:bg-white outline-none transition" placeholder="Enter username">
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-600 mb-2">Password</label>
                    <div class="relative">
                        <i class="fas fa-lock absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"></i>
                        <input type="password" id="password" class="login-input w-full pl-11 pr-12 py-3.5 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-gray-800 focus:border-transparent focus:bg-white outline-none transition" placeholder="Enter password">
                        <button type="button" id="togglePassword" class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                </div>
                <button type="submit" id="loginBtn" class="w-full bg-gradient-to-r from-gray-800 to-gray-900 text-white py-3.5 rounded-xl font-semibold hover:from-gray-900 hover:to-black transition-all shadow-lg shadow-gray-300 flex items-center justify-center gap-2">
                    <span>Sign In</span>
                    <i class="fas fa-arrow-right"></i>
                </button>
            </form>
        </div>
    </div>

    <!-- Main App -->
    <div id="mainApp" class="hidden">
        <!-- Mobile Menu -->
        <div id="mobileOverlay" class="hidden fixed inset-0 bg-black/50 z-40 lg:hidden" onclick="closeMobileMenu()"></div>
        
        <div id="mobileMenu" class="mobile-menu hidden fixed left-0 top-0 h-full w-72 bg-white shadow-2xl z-50 lg:hidden">
            <div class="p-5 border-b border-gray-100">
                <div class="flex items-center gap-3">
                    <div class="w-12 h-12 bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl flex items-center justify-center">
                        <i class="fas fa-users text-white text-lg"></i>
                    </div>
                    <div>
                        <h2 class="font-bold text-gray-800">NOC Members</h2>
                        <p class="text-sm text-gray-400" id="mobileWelcome">Welcome</p>
                    </div>
                </div>
            </div>
            <nav class="p-4 space-y-2">
                <button onclick="navigateTo('home'); closeMobileMenu();" class="mobile-nav-btn w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-600 hover:bg-gray-100 transition" data-page="home">
                    <i class="fas fa-home w-5"></i> Home
                </button>
                <button onclick="navigateTo('learning'); closeMobileMenu();" class="mobile-nav-btn w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-600 hover:bg-gray-100 transition" data-page="learning">
                    <i class="fas fa-book w-5"></i> Learning
                </button>
                <div id="mobileAdminBtn" class="hidden">
                    <button onclick="navigateTo('admin'); closeMobileMenu();" class="mobile-nav-btn w-full flex items-center gap-3 px-4 py-3 rounded-xl text-gray-600 hover:bg-gray-100 transition" data-page="admin">
                        <i class="fas fa-cog w-5"></i> Admin Panel
                    </button>
                </div>
                <div class="pt-2">
                    <p class="px-4 py-2 text-xs font-medium text-gray-400 uppercase">Information</p>
                    <div id="mobileInfoMenu" class="space-y-1"></div>
                </div>
            </nav>
            <div class="absolute bottom-0 left-0 right-0 p-4 border-t border-gray-100">
                <button onclick="logout()" class="w-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl text-red-600 hover:bg-red-50 transition">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </div>

        <!-- Navigation -->
        <nav class="bg-white shadow-sm border-b border-gray-100 sticky top-0 z-30">
            <div class="max-w-7xl mx-auto px-4">
                <div class="flex items-center justify-between h-16">
                    <div class="flex items-center gap-3">
                        <button onclick="openMobileMenu()" class="lg:hidden w-10 h-10 flex items-center justify-center rounded-xl hover:bg-gray-100 transition">
                            <i class="fas fa-bars text-gray-600"></i>
                        </button>
                        <div class="w-10 h-10 bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl flex items-center justify-center">
                            <i class="fas fa-users text-white"></i>
                        </div>
                        <span class="font-bold text-xl text-gray-800 hidden sm:block">NOC Members</span>
                    </div>
                    
                    <!-- Desktop Navigation -->
                    <div class="hidden lg:flex items-center gap-1">
                        <button onclick="navigateTo('home')" class="nav-btn px-4 py-2 rounded-xl text-gray-600 hover:bg-gray-100 transition font-medium" data-page="home">
                            <i class="fas fa-home mr-2"></i>Home
                        </button>
                        <button onclick="navigateTo('learning')" class="nav-btn px-4 py-2 rounded-xl text-gray-600 hover:bg-gray-100 transition font-medium" data-page="learning">
                            <i class="fas fa-book mr-2"></i>Learning
                        </button>
                        <div class="relative">
                            <button onclick="toggleInfoDropdown()" class="nav-btn px-4 py-2 rounded-xl text-gray-600 hover:bg-gray-100 transition font-medium" data-page="information">
                                <i class="fas fa-info-circle mr-2"></i>Information
                                <i class="fas fa-chevron-down ml-1 text-xs"></i>
                            </button>
                            <div id="infoDropdown" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-xl border border-gray-100 py-2 z-50"></div>
                        </div>
                        <button id="adminBtn" onclick="navigateTo('admin')" class="hidden nav-btn px-4 py-2 rounded-xl text-gray-600 hover:bg-gray-100 transition font-medium" data-page="admin">
                            <i class="fas fa-cog mr-2"></i>Admin
                        </button>
                        <button onclick="logout()" class="px-4 py-2 rounded-xl text-red-600 hover:bg-red-50 transition font-medium">
                            <i class="fas fa-sign-out-alt mr-2"></i>Logout
                        </button>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Welcome Banner -->
        <div class="bg-gradient-to-r from-gray-800 to-gray-900 text-white">
            <div class="max-w-7xl mx-auto px-4 py-5">
                <p class="text-gray-300">Hi, <span id="welcomeUser" class="font-semibold text-white"></span>! üëã</p>
            </div>
        </div>

        <!-- Home Page -->
        <div id="homePage" class="page max-w-7xl mx-auto px-4 py-6 sm:py-8">
            <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6">
                <h2 class="text-xl sm:text-2xl font-bold text-gray-800 flex items-center gap-3">
                    <div class="w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center">
                        <i class="fas fa-bullhorn text-blue-600"></i>
                    </div>
                    Team Updates
                </h2>
                <button id="addUpdateBtn" onclick="openUpdateModal()" class="hidden btn-primary bg-gray-900 text-white px-5 py-2.5 rounded-xl hover:bg-gray-800 font-medium shadow-lg shadow-gray-200">
                    <i class="fas fa-plus mr-2"></i>Add Update
                </button>
            </div>
            <div id="updatesContainer" class="grid gap-4"></div>
        </div>

        <!-- Learning Page -->
        <div id="learningPage" class="page hidden max-w-7xl mx-auto px-4 py-6 sm:py-8">
            <div class="flex flex-col gap-4 mb-6">
                <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4">
                    <h2 class="text-xl sm:text-2xl font-bold text-gray-800 flex items-center gap-3">
                        <div class="w-10 h-10 bg-amber-100 rounded-xl flex items-center justify-center">
                            <i class="fas fa-folder-open text-amber-600"></i>
                        </div>
                        Learning Resources
                    </h2>
                    <div id="learningAdminBtns" class="hidden flex gap-2">
                        <button onclick="openFolderModal()" class="btn-secondary bg-gray-100 text-gray-700 px-4 py-2.5 rounded-xl font-medium">
                            <i class="fas fa-folder-plus mr-2"></i>New Folder
                        </button>
                        <button onclick="openLearningItemModal()" class="btn-primary bg-gray-900 text-white px-4 py-2.5 rounded-xl hover:bg-gray-800 font-medium shadow-lg shadow-gray-200">
                            <i class="fas fa-plus mr-2"></i>Add Item
                        </button>
                    </div>
                </div>
                <div id="breadcrumb" class="flex items-center gap-2 text-gray-500 text-sm flex-wrap"></div>
            </div>
            <div id="learningContainer" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-3 sm:gap-4"></div>
        </div>

        <!-- Information Page -->
        <div id="informationPage" class="page hidden max-w-7xl mx-auto px-4 py-6 sm:py-8">
            <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6">
                <h2 id="infoPageTitle" class="text-xl sm:text-2xl font-bold text-gray-800 flex items-center gap-3">
                    <div class="w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center">
                        <i class="fas fa-layer-group text-blue-600"></i>
                    </div>
                    <span id="infoTitleText">Information</span>
                </h2>
                <button id="addInfoCardBtn" onclick="openInfoCardModal()" class="hidden btn-primary bg-gray-900 text-white px-5 py-2.5 rounded-xl hover:bg-gray-800 font-medium shadow-lg shadow-gray-200">
                    <i class="fas fa-plus mr-2"></i>Add Item
                </button>
            </div>
            <div id="infoCardsContainer" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4"></div>
        </div>

        <!-- Admin Page -->
        <div id="adminPage" class="page hidden max-w-7xl mx-auto px-4 py-6 sm:py-8">
            <h2 class="text-xl sm:text-2xl font-bold text-gray-800 flex items-center gap-3 mb-6">
                <div class="w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center">
                    <i class="fas fa-shield-alt text-blue-600"></i>
                </div>
                Admin Panel
            </h2>
            
            <div class="flex gap-1 mb-6 bg-gray-100 p-1 rounded-xl w-fit">
                <button onclick="showAdminTab('users')" class="admin-tab px-4 py-2.5 font-medium text-gray-600 rounded-lg transition" data-tab="users">
                    <i class="fas fa-users mr-2"></i>Users
                </button>
                <button onclick="showAdminTab('categories')" class="admin-tab px-4 py-2.5 font-medium text-gray-600 rounded-lg transition" data-tab="categories">
                    <i class="fas fa-tags mr-2"></i>Categories
                </button>
            </div>

            <div id="usersTab" class="admin-tab-content">
                <div class="flex justify-end mb-4">
                    <button onclick="openUserModal()" class="bg-gray-900 text-white px-4 py-2.5 rounded-xl hover:bg-gray-800 transition font-medium shadow-lg shadow-gray-200">
                        <i class="fas fa-user-plus mr-2"></i>Add User
                    </button>
                </div>
                <div class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden">
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-4 sm:px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase">Account</th>
                                    <th class="px-4 sm:px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase hidden sm:table-cell">Username</th>
                                    <th class="px-4 sm:px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase">Password</th>
                                    <th class="px-4 sm:px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase">Role</th>
                                    <th class="px-4 sm:px-6 py-4 text-right text-xs font-semibold text-gray-500 uppercase">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="usersTable" class="divide-y divide-gray-100"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div id="categoriesTab" class="admin-tab-content hidden">
                <div class="flex justify-end mb-4">
                    <button onclick="openCategoryModal()" class="bg-gray-900 text-white px-4 py-2.5 rounded-xl hover:bg-gray-800 transition font-medium shadow-lg shadow-gray-200">
                        <i class="fas fa-plus mr-2"></i>Add Category
                    </button>
                </div>
                <div id="categoriesList" class="grid gap-3"></div>
            </div>
        </div>
    </div>

    <!-- Modals (Update, User, Category, Folder, Learning Item, Text View, Info Card, Move, Rename) -->
    <!-- Update Modal -->
    <div id="updateModal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
        <div class="bg-white rounded-2xl w-full max-w-lg max-h-[90vh] overflow-hidden flex flex-col">
            <div class="p-5 border-b border-gray-100 flex items-center justify-between flex-shrink-0">
                <h3 id="updateModalTitle" class="text-xl font-bold text-gray-800">Add Update</h3>
                <button onclick="closeModal('updateModal')" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100 text-gray-400">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="updateForm" class="p-5 space-y-4 overflow-y-auto flex-1">
                <input type="hidden" id="updateId">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Topic</label>
                    <input type="text" id="updateTopic" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-gray-800 focus:border-transparent focus:bg-white outline-none transition" required>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Badge</label>
                    <select id="updateBadge" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-gray-800 focus:border-transparent focus:bg-white outline-none transition">
                        <option value="important">üî¥ Important</option>
                        <option value="general">üîµ General</option>
                        <option value="announcement">üü¢ Announcement</option>
                        <option value="reminder">üü° Reminder</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Message</label>
                    <textarea id="updateMessage" rows="4" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-gray-800 focus:border-transparent focus:bg-white outline-none transition resize-none" required></textarea>
                    <p class="text-xs text-gray-400 mt-1">URLs will be clickable automatically</p>
                </div>
            </form>
            <div class="p-5 border-t border-gray-100 flex justify-end gap-3 flex-shrink-0">
                <button onclick="closeModal('updateModal')" class="px-5 py-2.5 text-gray-600 hover:bg-gray-100 rounded-xl transition font-medium">Cancel</button>
                <button onclick="saveUpdate()" class="px-5 py-2.5 bg-gray-900 text-white rounded-xl hover:bg-gray-800 transition font-medium">Save</button>
            </div>
        </div>
    </div>

    <!-- User Modal -->
    <div id="userModal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
        <div class="bg-white rounded-2xl w-full max-w-lg max-h-[90vh] overflow-hidden flex flex-col">
            <div class="p-5 border-b border-gray-100 flex items-center justify-between flex-shrink-0">
                <h3 id="userModalTitle" class="text-xl font-bold text-gray-800">Add User</h3>
                <button onclick="closeModal('userModal')" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100 text-gray-400">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="userForm" class="p-5 space-y-4 overflow-y-auto flex-1">
                <input type="hidden" id="userId">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Account Name (Display)</label>
                    <input type="text" id="userAccountName" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-gray-800 focus:border-transparent focus:bg-white outline-none transition" placeholder="e.g. John Doe" required>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Username (Login)</label>
                    <input type="text" id="userUsername" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-gray-800 focus:border-transparent focus:bg-white outline-none transition" placeholder="e.g. johndoe" required>
                </div>
      <!-- User Modal - Find this section and replace password field -->
<div>
    <label class="block text-sm font-medium text-gray-700 mb-2">Password</label>
    <div class="relative">
        <input type="password" id="userPassword" class="w-full pl-4 pr-12 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-gray-800 focus:border-transparent focus:bg-white outline-none transition font-mono" required>
        <button type="button" id="toggleEditPassword" onclick="toggleEditPasswordVisibility()" class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition">
            <i class="fas fa-eye"></i>
        </button>
    </div>
</div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Role</label>
                    <select id="userRole" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-gray-800 focus:border-transparent focus:bg-white outline-none transition">
                        <option value="user">User</option>
                        <option value="admin">Admin</option>
                    </select>
                </div>
            </form>
            <div class="p-5 border-t border-gray-100 flex justify-end gap-3 flex-shrink-0">
                <button onclick="closeModal('userModal')" class="px-5 py-2.5 text-gray-600 hover:bg-gray-100 rounded-xl transition font-medium">Cancel</button>
                <button onclick="saveUser()" class="px-5 py-2.5 bg-gray-900 text-white rounded-xl hover:bg-gray-800 transition font-medium">Save</button>
            </div>
        </div>
    </div>

    <!-- Category Modal -->
    <div id="categoryModal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
        <div class="bg-white rounded-2xl w-full max-w-lg">
            <div class="p-5 border-b border-gray-100 flex items-center justify-between">
                <h3 id="categoryModalTitle" class="text-xl font-bold text-gray-800">Add Category</h3>
                <button onclick="closeModal('categoryModal')" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100 text-gray-400">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="categoryForm" class="p-5 space-y-4">
                <input type="hidden" id="categoryId">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Category Name</label>
                    <input type="text" id="categoryName" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-gray-800 focus:border-transparent focus:bg-white outline-none transition" required>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Icon</label>
                    <select id="categoryIcon" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-gray-800 focus:border-transparent focus:bg-white outline-none transition">
                        <option value="fa-users">üë• Team</option>
                        <option value="fa-clipboard-list">üìã Procedures</option>
                        <option value="fa-briefcase">üíº Business</option>
                        <option value="fa-chart-line">üìà Analytics</option>
                        <option value="fa-cogs">‚öôÔ∏è Settings</option>
                        <option value="fa-book">üìö Documentation</option>
                        <option value="fa-link">üîó Links</option>
                        <option value="fa-tools">üõ†Ô∏è Tools</option>
                    </select>
                </div>
            </form>
            <div class="p-5 border-t border-gray-100 flex justify-end gap-3">
                <button onclick="closeModal('categoryModal')" class="px-5 py-2.5 text-gray-600 hover:bg-gray-100 rounded-xl transition font-medium">Cancel</button>
                <button onclick="saveCategory()" class="px-5 py-2.5 bg-gray-900 text-white rounded-xl hover:bg-gray-800 transition font-medium">Save</button>
            </div>
        </div>
    </div>

    <!-- Folder Modal -->
    <div id="folderModal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
        <div class="bg-white rounded-2xl w-full max-w-lg">
            <div class="p-5 border-b border-gray-100 flex items-center justify-between">
                <h3 id="folderModalTitle" class="text-xl font-bold text-gray-800">Create Folder</h3>
                <button onclick="closeModal('folderModal')" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100 text-gray-400">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="folderForm" class="p-5 space-y-4">
                <input type="hidden" id="folderId">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Folder Name</label>
                    <input type="text" id="folderName" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-gray-800 focus:border-transparent focus:bg-white outline-none transition" required>
                </div>
            </form>
            <div class="p-5 border-t border-gray-100 flex justify-end gap-3">
                <button onclick="closeModal('folderModal')" class="px-5 py-2.5 text-gray-600 hover:bg-gray-100 rounded-xl transition font-medium">Cancel</button>
                <button onclick="saveFolder()" class="px-5 py-2.5 bg-gray-900 text-white rounded-xl hover:bg-gray-800 transition font-medium">Save</button>
            </div>
        </div>
    </div>

    <!-- Learning Item Modal -->
    <div id="learningItemModal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
        <div class="bg-white rounded-2xl w-full max-w-lg max-h-[85vh] overflow-hidden flex flex-col">
            <div class="p-5 border-b border-gray-100 flex items-center justify-between flex-shrink-0">
                <h3 id="learningItemModalTitle" class="text-xl font-bold text-gray-800">Add Item</h3>
                <button onclick="closeModal('learningItemModal')" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100 text-gray-400">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="learningItemForm" class="p-5 space-y-4 overflow-y-auto flex-1">
                <input type="hidden" id="learningItemId">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Title</label>
                    <input type="text" id="learningItemTopic" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-gray-800 focus:border-transparent focus:bg-white outline-none transition" required>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Type</label>
                    <select id="learningItemType" onchange="toggleLearningItemFields()" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-gray-800 focus:border-transparent focus:bg-white outline-none transition">
                        <option value="pdf">PDF / Link</option>
                        <option value="text">Text Note</option>
                    </select>
                </div>
                <div id="pdfLinkField">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Link URL</label>
                    <input type="url" id="learningItemLink" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-gray-800 focus:border-transparent focus:bg-white outline-none transition" placeholder="https://...">
                </div>
                <div id="textContentField" class="hidden">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Content</label>
                    <textarea id="learningItemContent" rows="6" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-gray-800 focus:border-transparent focus:bg-white outline-none transition font-mono text-sm resize-none"></textarea>
                </div>
            </form>
            <div class="p-5 border-t border-gray-100 flex justify-end gap-3 flex-shrink-0">
                <button onclick="closeModal('learningItemModal')" class="px-5 py-2.5 text-gray-600 hover:bg-gray-100 rounded-xl transition font-medium">Cancel</button>
                <button onclick="saveLearningItem()" class="px-5 py-2.5 bg-gray-900 text-white rounded-xl hover:bg-gray-800 transition font-medium">Save</button>
            </div>
        </div>
    </div>

    <!-- Text View Modal -->
    <div id="textViewModal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
        <div class="bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col">
            <div class="p-5 border-b border-gray-100 flex items-center justify-between flex-shrink-0">
                <h3 id="textViewTitle" class="text-xl font-bold text-gray-800"></h3>
                <button onclick="closeModal('textViewModal')" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100 text-gray-400">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div id="textViewContent" class="p-5 overflow-y-auto flex-1 whitespace-pre-wrap text-gray-700 font-mono text-sm bg-gray-50"></div>
        </div>
    </div>

    <!-- Info Card Modal -->
    <div id="infoCardModal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
        <div class="bg-white rounded-2xl w-full max-w-lg max-h-[90vh] overflow-hidden flex flex-col">
            <div class="p-5 border-b border-gray-100 flex items-center justify-between flex-shrink-0">
                <h3 id="infoCardModalTitle" class="text-xl font-bold text-gray-800">Add Item</h3>
                <button onclick="closeModal('infoCardModal')" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100 text-gray-400">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="infoCardForm" class="p-5 space-y-4 overflow-y-auto flex-1">
                <input type="hidden" id="infoCardId">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Title</label>
                    <input type="text" id="infoCardTitle" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-gray-800 focus:border-transparent focus:bg-white outline-none transition" required>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Display Type</label>
                    <select id="infoCardDisplayType" onchange="toggleInfoCardFields()" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-gray-800 focus:border-transparent focus:bg-white outline-none transition">
                        <option value="icon">Icon</option>
                        <option value="image">Image</option>
                    </select>
                </div>
                <div id="iconField">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Icon</label>
                    <select id="infoCardIcon" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-gray-800 focus:border-transparent focus:bg-white outline-none transition">
                        <option value="fa-link">üîó Link</option>
                        <option value="fa-file-alt">üìÑ Document</option>
                        <option value="fa-globe">üåê Website</option>
                        <option value="fa-database">üóÑÔ∏è Database</option>
                        <option value="fa-chart-bar">üìä Chart</option>
                        <option value="fa-calendar">üìÖ Calendar</option>
                        <option value="fa-envelope">‚úâÔ∏è Email</option>
                        <option value="fa-phone">üìû Phone</option>
                        <option value="fa-map-marker-alt">üìç Location</option>
                        <option value="fa-video">üé• Video</option>
                        <option value="fa-image">üñºÔ∏è Image</option>
                        <option value="fa-code">üíª Code</option>
                    </select>
                </div>
                <div id="imageField" class="hidden space-y-3">
                    <label class="block text-sm font-medium text-gray-700">Image Source</label>
                    <div class="flex gap-2">
                        <button type="button" onclick="setImageSource('url')" id="imgSourceUrl" class="flex-1 px-4 py-2.5 rounded-xl border-2 border-gray-800 bg-gray-800 text-white font-medium transition">
                            <i class="fas fa-link mr-2"></i>URL
                        </button>
                        <button type="button" onclick="setImageSource('upload')" id="imgSourceUpload" class="flex-1 px-4 py-2.5 rounded-xl border-2 border-gray-200 text-gray-600 font-medium hover:border-gray-300 transition">
                            <i class="fas fa-upload mr-2"></i>Upload
                        </button>
                    </div>
                    <div id="imageUrlField">
                        <input type="url" id="infoCardImageUrl" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-gray-800 focus:border-transparent focus:bg-white outline-none transition" placeholder="https://example.com/image.jpg">
                    </div>
                    <div id="imageUploadField" class="hidden">
                        <label class="flex flex-col items-center justify-center w-full h-32 border-2 border-gray-200 border-dashed rounded-xl cursor-pointer bg-gray-50 hover:bg-gray-100 transition">
                            <div class="flex flex-col items-center justify-center pt-5 pb-6" id="uploadPlaceholder">
                                <i class="fas fa-cloud-upload-alt text-3xl text-gray-400 mb-2"></i>
                                <p class="text-sm text-gray-500">Click to upload image</p>
                                <p class="text-xs text-gray-400 mt-1">PNG, JPG up to 2MB</p>
                            </div>
                            <div id="uploadPreview" class="hidden w-full h-full flex items-center justify-center">
                                <img id="previewImg" class="max-h-28 rounded-lg" src="" alt="Preview">
                            </div>
                            <input type="file" id="infoCardImageFile" class="hidden" accept="image/*" onchange="handleImageUpload(event)">
                        </label>
                    </div>
                    <input type="hidden" id="infoCardImage">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Link URL</label>
                    <input type="url" id="infoCardLink" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-gray-800 focus:border-transparent focus:bg-white outline-none transition" placeholder="https://..." required>
                </div>
            </form>
            <div class="p-5 border-t border-gray-100 flex justify-end gap-3 flex-shrink-0">
                <button onclick="closeModal('infoCardModal')" class="px-5 py-2.5 text-gray-600 hover:bg-gray-100 rounded-xl transition font-medium">Cancel</button>
                <button onclick="saveInfoCard()" class="px-5 py-2.5 bg-gray-900 text-white rounded-xl hover:bg-gray-800 transition font-medium">Save</button>
            </div>
        </div>
    </div>

   

    <!-- Rename Modal -->
    <div id="renameModal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
        <div class="bg-white rounded-2xl w-full max-w-lg">
            <div class="p-5 border-b border-gray-100 flex items-center justify-between">
                <h3 class="text-xl font-bold text-gray-800">Rename</h3>
                <button onclick="closeModal('renameModal')" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100 text-gray-400">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form class="p-5">
                <input type="text" id="renameInput" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-gray-800 focus:border-transparent focus:bg-white outline-none transition" required>
            </form>
            <div class="p-5 border-t border-gray-100 flex justify-end gap-3">
                <button onclick="closeModal('renameModal')" class="px-5 py-2.5 text-gray-600 hover:bg-gray-100 rounded-xl transition font-medium">Cancel</button>
                <button onclick="confirmRename()" class="px-5 py-2.5 bg-gray-900 text-white rounded-xl hover:bg-gray-800 transition font-medium">Rename</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
